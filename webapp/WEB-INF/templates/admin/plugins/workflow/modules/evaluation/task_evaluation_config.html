<fieldset>		
	<legend>#i18n{module.workflow.evaluation.task_evaluation_config.title}</legend>
		<label for="task_title">#i18n{module.workflow.evaluation.task_evaluation_config.label_task_title} * :</label>
	  	<#if config?exists&&config.taskTitle?exists>
			<input type="text" name="task_title" id="" class="input-xxlarge" value="${config.taskTitle}"  maxlength="255"/>
	   	<#else>
		    <input type="text" name="task_title" id="" class="input-xxlarge" value=""  maxlength="255"/>
		</#if>	
	 	<label for="task_description">#i18n{module.workflow.evaluation.task_evaluation_config.label_task_description} * :</label>
	    <#if config?exists&&config.taskDescription?exists>
	    	<textarea name="task_description"  rows="4" style="width:50%;">${config.taskDescription}</textarea>
	    <#else>
		   	<textarea name="task_description"  rows="4" style="width:50%;"></textarea>
		</#if>
		<label for="summary_title">#i18n{module.workflow.evaluation.task_evaluation_config.label_summary_title} :</label>
		<#if config?exists&&config.summaryTitle?exists>
			<input type="text" name="summary_title" id="" class="input-xxlarge" value="${config.summaryTitle}"  maxlength="255"/>
		<#else>
			<input type="text" name="summary_title" id="" class="input-xxlarge" value=""  maxlength="255"/>
		</#if>	
		<label for="mandatory_summary" class="checkbox">#i18n{module.workflow.evaluation.task_evaluation_config.label_mandatory_summary}
			<#if config?exists&&config.mandatorySummary>
				<input name="mandatory_summary" value="1" type="checkbox" checked="checked">
   		 	<#else>
				<input name="mandatory_summary" value="1" type="checkbox">
  		 	</#if>
		</label>
		<hr>
		<ul class="nav nav-tabs">
			<li class="active">
				<a data-toggle="tab" href="#panel1">#i18n{module.workflow.evaluation.task_evaluation_config.label_notation}</a>
			</li>
			<li><a data-toggle="tab" href="#panel2"> #i18n{module.workflow.evaluation.task_evaluation_config.label_synthesis_criteria_title}</a></li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane active" id="panel1">
			<label for="use_notation" class="checkbox">#i18n{module.workflow.evaluation.task_evaluation_config.label_use_notation}
		  		<#if config?exists && config.finalNoteTitle?has_content>
		  		<input type="checkbox" name="use_notation" id="use_notation" checked="checked"/>
		  		<#else>
		  		<input type="checkbox" name="use_notation" id="use_notation" />
		  	</#if>
			</label>
			<label for="final_note_title" >#i18n{module.workflow.evaluation.task_evaluation_config.label_final_note_title} *</label>
		    	<#if config?exists&&config.finalNoteTitle?exists>
					<input type="text" name="final_note_title" id="" class="input-xxlarge" value="${config.finalNoteTitle}"  maxlength="255"/>
		    	<#else>
		     		<input type="text" name="final_note_title" id="" class="input-xxlarge" value=""  maxlength="255"/>
		    	</#if>
			<label for="automatic_final_note"  class="checkbox">	#i18n{module.workflow.evaluation.task_evaluation_config.label_finale_note_type}
	    	<#if config?exists&&config.automaticFinalNote>
				<input name="automatic_final_note" value="1" type="checkbox" checked="checked" onclick="javascript:automatic_note();">
   		 	<#else>
   		 		<input name="automatic_final_note" value="1" type="checkbox" onclick="javascript:automatic_note();">
			</label>
   		 	</#if>
	    	<div id="is_not_auto">
				<label for="final_note_mandatory"  class="checkbox">#i18n{module.workflow.evaluation.task_evaluation_config.label_final_note_mandatory}
	   		 		<#if config?exists&&config.mandatoryFinalNote>
	   		 			<input name="final_note_mandatory" value="1" type="checkbox" checked="checked">
	   		 		<#else>
	   		 			<input name="final_note_mandatory" value="1" type="checkbox">
	   		 		</#if>
				</label>
		 	   	<label for="best_score_final_note" class="inline">#i18n{module.workflow.evaluation.task_evaluation_config.label_best_score_final_note} *
			    	<#if config?exists&&config.bestScoreFinalNote?exists>
						<input type="text" name="best_score_final_note" id="" class="input-mini" value="${config.bestScoreFinalNote}"  maxlength="3"/>
			     	<#else>
			   			<input type="text" name="best_score_final_note" id="" class="input-mini" value=""  maxlength="3"/>
				    </#if>		
				</label>
			</div>
			<br>
			<table class="table table-striped table-condensed">
	  		<tr>
	  			<th>#i18n{module.workflow.evaluation.task_evaluation_config.row_number}</th>
	  			<th>#i18n{module.workflow.evaluation.task_evaluation_config.row_criteria_checked}</th>
	  			<th>#i18n{module.workflow.evaluation.task_evaluation_config.row_criteria_title}</th>
	  			<th>#i18n{module.workflow.evaluation.task_evaluation_config.row_manadatory_criteria}</th>
	  			<th>#i18n{module.workflow.evaluation.task_evaluation_config.row_criteria_best_score}</th>
	  		</tr>
		 	<#list config.evaluationsCriteria as criteria>
			  	<tr>
			  		<td>
			  			<input name="id_criteria_${criteria_index+1}" type="hidden" value="${criteria.idCriteria}">
			  			${criteria_index+1}
			  		</td>
			  		<td>
			  			<#if criteria.idCriteria!=-1>
   		 					<input name="criterias_checked" value="${criteria_index+1}" type="checkbox" checked="checked">
   		 				<#else>
   		 					<input name="criterias_checked" value="${criteria_index+1}" type="checkbox">
   		 				</#if>
				  	</td>	
				     <td> 	
				      	<#if criteria.title?has_content>
					     		 <input type="text" name="criteria_title_${criteria_index+1}" id="" class="input-xxlarge" value="${criteria.title}"  maxlength="255"/>
					     <#else>
					     		<input type="text" name="criteria_title_${criteria_index+1}" id="" class="input-xxlarge" value=""  maxlength="255"/>
					     </#if>	
					  </td>   
					  <td> 
							<#if criteria.title?has_content&&criteria.mandatory>
			   		 			<input name="mandatory_criteria_${criteria_index+1}" value="1" type="checkbox" checked="checked">
			   		 		<#else>
			   		 			<input name="mandatory_criteria_${criteria_index+1}" value="1" type="checkbox">
			   		 		</#if>
			   		 	</td>	
				 		<td> 
			    		<#if criteria.bestScore?has_content>
							<input type="text" name="criteria_best_score_${criteria_index+1}" id="" class="input-mini" value="${criteria.bestScore}"  maxlength="3"/>
						<#else>
				     		<input type="text" name="criteria_best_score_${criteria_index+1}" id=""  class="input-mini"  value=""  maxlength="3"/>
				     	</#if>		
					</td>	
				</tr>
			</#list>
			</table>
		</div>
		<div class="tab-pane" id="panel2">
			<table class="table table-striped table-codensed">
	  		<tr>
	  			<th>#i18n{module.workflow.evaluation.task_evaluation_config.row_number}</th>
	  			<th>#i18n{module.workflow.evaluation.task_evaluation_config.row_criteria_title}</th>
	  			<th>#i18n{module.workflow.evaluation.task_evaluation_config.row_manadatory_criteria}</th>
	  			<th>#i18n{module.workflow.evaluation.task_evaluation_config.row_criteria_type}</th>
	  			<th>&nbsp;</th>
	  		</tr>
		 	<#list config.listSynthesisCriteria as criteria>
			<tr>
			 	<td>
			 		<input type="hidden" name="synthesis_criterias" value="${criteria_index+1}"/>
			 		<input name="id_synthesis_criteria_${criteria_index+1}" type="hidden" value="${criteria.idCriteria}">
			 			${criteria_index+1}
			  		</td>
				  	<td> 	
				      	<#if criteria.title?has_content>
							<input type="text" name="synthesis_criterias_title_${criteria_index+1}" id="" class="input-xxlarge" value="${criteria.title}"  maxlength="255"/>
					     <#else>
					     	<input type="text" name="synthesis_criterias_title_${criteria_index+1}" id="" class="input-xxlarge" value=""  maxlength="255"/>
					     </#if>	
					  </td>
					  <td>
					  		<#if criteria.title?has_content&&criteria.mandatory>
			   		 			<input name="synthesis_mandatory_criteria_${criteria_index+1}" value="1" type="checkbox" checked="checked">
			   		 		<#else>
			   		 			<input name="synthesis_mandatory_criteria_${criteria_index+1}" value="1" type="checkbox">
			   		 		</#if>
					  </td>
					  <td>
					  	<#if criteria.type?has_content>
					  		<@combo name="criteria_type_${criteria_index+1}" default_value="${criteria.type?string}" items=types_list />
					  	<#else>
					  		<@combo name="criteria_type_${criteria_index+1}" default_value="" items=types_list />
					  	</#if>
			   		</td>
			   		<td>
			   			<button class="btn btn-primary btn-small" name="buttons_manage_values" type="button" 
			   					onclick="showTR('criteria_values_${criteria_index+1}'); showTR('criteria_new_values_${criteria_index+1}'); this.style.display='none';" title="#i18n{module.workflow.evaluation.task_evaluation_config.label_manage_values}">
								<i class="icon-wrench icon-white"/>
						</button>
			   		</td>
				</tr>
				<#assign value_index = 0 />
				<#-- existing values -->
				<#if criteria.availableValues?has_content && criteria.availableValues?size &gt; 0>
				<tr id="criteria_values_${criteria_index+1}">
					<td colspan="5">
				 		<strong>#i18n{module.workflow.evaluation.task_evaluation_config.values}</strong>
				 		<#list criteria.availableValues as available_value>
				 			<input type="hidden" value="${value_index}" name="${criteria_index+1}_synthesis_criterias_form_id" />
				 			<input type="hidden" value="${available_value.value!}" name="${criteria_index+1}_synthesis_criterias_value_${value_index}" />
				 			<input type="text" value="${available_value.title!}"  class="input-small" name="${criteria_index+1}_synthesis_criterias_title_${value_index}" />&nbsp;
				 			<#assign value_index = value_index + 1 />
				 		</#list>
					</td>
				</tr>
				</#if>
				<#-- empty values -->
				<tr id="criteria_new_values_${criteria_index+1}">
					<td colspan="5">
						<strong>#i18n{module.workflow.evaluation.task_evaluation_config.addValues}</strong>
						<#list create_values as available_value>
				 			<input type="hidden" value="${value_index}" name="${criteria_index+1}_synthesis_criterias_form_id" />
				 			<input type="hidden" value="${available_value.value!}" name="${criteria_index+1}_synthesis_criterias_value_${value_index}" />
				 			<input type="text" value="${available_value.title!}" class="input-small" name="${criteria_index+1}_synthesis_criterias_title_${value_index}" />&nbsp;
			 				<#assign value_index = value_index + 1 />
			 			</#list>
					</td>
				</tr>
			</#list>
			</table>
		</div>
	</div>
 
<script type="text/javascript" charset="utf-8">
function automatic_note()
{
	var x=document.getElementsByName("automatic_final_note");
	if(x[0].checked)
	{
		document.getElementById("is_not_auto").style.display="none";
	}
	else
	{
		document.getElementById("is_not_auto").style.display="block";
	}
}
automatic_note();

$("input[name='buttons_manage_values']").show();
$("tr[id^='criteria_values_']").hide();
$("tr[id^='criteria_new_values_']").hide();

function showTR( trID )
{
	if (document.getElementById && document.getElementById(trID) != null)
	{
		document.getElementById( trID ).style.display='';
	}
}

</script>

